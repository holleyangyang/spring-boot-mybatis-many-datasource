<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<HTML>
<HEAD>
  <TITLE> ZTREE DEMO </TITLE>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" href="css/zTreeStyle/zTreeStyle.css" type="text/css">
  <style>
    body {
      background-color: white;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    div, p, table, th, td {
      list-style: none;
      margin: 0;
      padding: 0;
      color: #333;
      font-size: 12px;
      font-family: dotum, Verdana, Arial, Helvetica, AppleGothic, sans-serif;
    }

    #testIframe {
      margin-left: 10px;
    }
  </style>
  <script type="text/javascript" src="js/jquery-1.10.1.js"></script>
  <script type="text/javascript" src="js/jquery.ztree.core-3.5.js"></script>
  <SCRIPT type="text/javascript">
   
    var zNodes; 
    
    $.ajax({
        type: "POST",
        url: "/manager/personInfo/getAllUserBySushuleibie"  ,
        dataType: "json",
        contentType:"application/json",  
        data: {},
        success: function (result) {
        	zNodes =result;
        	 $(document).ready(function () {

        		    var zTree;
        		    var demoIframe;

        		    var setting = {
        		      view: {
        		        dblClickExpand: false,
        		        showLine: true,
        		        selectedMulti: false
        		      },
        		      data: {
        		        simpleData: {
        		          enable: true,
        		          idKey: "id",
        		          pIdKey: "pId",
        		          rootPId: ""
        		        }
        		      },
        		      callback: {
        		        beforeClick: function (treeId, treeNode) {
        		          var zTree = $.fn.zTree.getZTreeObj("tree");
        		          if (treeNode.isParent) {
        		            zTree.expandNode(treeNode);
        		            return false;
        		          } else {
        		            demoIframe.attr("src", treeNode.file + ".html");
        		            return true;
        		          }
        		        }
        		      }
        		    };
        		    
        	      var t = $("#tree");
        	      t = $.fn.zTree.init(t, setting, zNodes);
        	      //demoIframe = $("#testIframe");
        	     // demoIframe.bind("load", loadReady);
        	      var zTree = $.fn.zTree.getZTreeObj("tree");
        	      zTree.selectNode(zTree.getNodeByParam("id", 101));

        	    });

        	    function loadReady() {
        	      var bodyH = demoIframe.contents().find("body").get(0).scrollHeight,
        	        htmlH = demoIframe.contents().find("html").get(0).scrollHeight,
        	        maxH = Math.max(bodyH, htmlH), minH = Math.min(bodyH, htmlH),
        	        h = demoIframe.height() >= maxH ? minH : maxH;
        	      if (h < 530) h = 530;
        	      demoIframe.height("100%");
        	    }
        }
    })
    
    
    var test = 
    	[
    	    {
    	        name: "境外",
    	        pId: 0,
    	        id: -1,
    	       open: true
    	    },
    	    {
    	        name: "境内",
    	        pId: 0,
    	        id: -2,
    	       open: true
    	    },
    	    {
    	        name: "美西",
    	        pId: 0,
    	        id: -3,
    	       open: true
    	    },
    	    {
    	        name: "敌对媒体",
    	        pId: 0,
    	        id: -4,
    	       open: true
    	    },
    	    {
    	        name: "国际媒体",
    	        pId: 0,
    	        id: -5,
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=1",
    	        name: "张三",
    	        pId: "-2",
    	        id: "1",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=3",
    	        name: "211212",
    	        pId: "-2",
    	        id: "3",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=4",
    	        name: "211212",
    	        pId: "-2",
    	        id: "4",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=5",
    	        name: "211212",
    	        pId: "-2",
    	        id: "5",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=6",
    	        name: "211212",
    	        pId: "-2",
    	        id: "6",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=7",
    	        name: "12",
    	        pId: "-2",
    	        id: "7",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=8",
    	        name: "12",
    	        pId: "-2",
    	        id: "8",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=9",
    	        name: "12",
    	        pId: "-2",
    	        id: "9",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=10",
    	        name: "12",
    	        pId: "-2",
    	        id: "10",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=11",
    	        name: "12",
    	        pId: "-2",
    	        id: "11",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=12",
    	        name: "12",
    	        pId: "-2",
    	        id: "12",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=13",
    	        name: "12",
    	        pId: "-2",
    	        id: "13",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=14",
    	        name: "12",
    	        pId: "-2",
    	        id: "14",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=15",
    	        name: "12",
    	        pId: "-2",
    	        id: "15",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=16",
    	        name: "32",
    	        pId: "-2",
    	        id: "16",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=17",
    	        name: "21",
    	        pId: "-2",
    	        id: "17",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=18",
    	        name: "21",
    	        pId: "-2",
    	        id: "18",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=19",
    	        name: "2334反反复复",
    	        pId: "-2",
    	        id: "19",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=20",
    	        name: "1245789+",
    	        pId: "-2",
    	        id: "20",
    	       open: true
    	    },
    	    {
    	        file: "person_edit.html?id=21",
    	        name: "1222112",
    	        pId: "-2",
    	        id: "21",
    	       open: true
    	    }
    	];
    
/*
    var zNodes = [
      {id: 1, pId: 0, name: "境外", open: true},
      {id: 101, pId: 1, name: "张三", file: "core/standardData"},
      {id: 102, pId: 1, name: "张三", file: "core/simpleData"},
      {id: 103, pId: 1, name: "张三", file: "core/noline"},
      {id: 104, pId: 1, name: "张三", file: "core/noicon"},
      {id: 105, pId: 1, name: "张三", file: "core/custom_icon"},
      {id: 106, pId: 1, name: "张三", file: "core/custom_iconSkin"},
      {id: 107, pId: 1, name: "张三", file: "core/custom_font"},
      {id: 115, pId: 1, name: "张三", file: "core/url"},
      {id: 108, pId: 1, name: "张三", file: "core/async"},
      {id: 109, pId: 1, name: "张三", file: "core/async_fun"},
      {id: 110, pId: 1, name: "张三", file: "core/update_fun"},
      {id: 111, pId: 1, name: "张三", file: "core/click"},
      {id: 112, pId: 1, name: "张三", file: "core/expand"},
      {id: 113, pId: 1, name: "张三", file: "core/searchNodes"},
      {id: 114, pId: 1, name: "张三", file: "core/otherMouse"},

      {id: 2, pId: 0, name: "境内", open: false},
      {id: 201, pId: 2, name: "Checkbox 勾选操作", file: "excheck/checkbox"},
      {id: 206, pId: 2, name: "Checkbox nocheck 演示", file: "excheck/checkbox_nocheck"},
      

      {id: 3, pId: 0, name: "美西", open: false},
      {id: 301, pId: 3, name: "拖拽 节点 基本控制", file: "exedit/drag"},
      {id: 302, pId: 3, name: "拖拽 节点 高级控制", file: "exedit/drag_super"},
      {id: 303, pId: 3, name: "用 zTree 方法 移动 / 复制 节点", file: "exedit/drag_fun"},
       

      {id: 4, pId: 0, name: "敌对媒体", open: false},
      {id: 401, pId: 4, name: "一次性加载大数据量", file: "bigdata/common"},
      {id: 402, pId: 4, name: "分批异步加载大数据量", file: "bigdata/diy_async"},
      {id: 403, pId: 4, name: "分批异步加载大数据量", file: "bigdata/page"},

      {id: 5, pId: 0, name: "国际媒体", open: false},
      {id: 501, pId: 5, name: "冻结根节点", file: "super/oneroot"},
      {id: 502, pId: 5, name: "单击展开/折叠节点", file: "super/oneclick"},
      {id: 503, pId: 5, name: "保持展开单一路径", file: "super/singlepath"},
      {id: 516, pId: 5, name: "模糊查找节点", file: "super/fuzzySearch"},
     
    ];
*/
   

  
  </SCRIPT>
</HEAD>

<BODY >
<TABLE border=0  align=left  style="width:98%;height:790px;margin-top:20px;">
  <TR>
    <TD width=260px align=left valign=top style="BORDER-RIGHT: #999999 1px dashed;">
      <ul id="tree" class="ztree" style="width:260px; overflow:auto;"></ul>
    </TD>
    <TD  align=left valign=top>
      <IFRAME ID="testIframe" Name="testIframe" FRAMEBORDER=0 SCROLLING=AUTO width="100%" height="100%" frameborder="0" name="right" 
              SRC="person.html"></IFRAME>
    </TD>
  </TR>
</TABLE>

</BODY>
</HTML>
